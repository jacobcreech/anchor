---
title: 0.31.1
description: Anchor - Release Notes 0.31.1
---

This release uses a new docker image found at `solanafoundation/anchor` for the `anchor verify` command. New images will be pushed to this organization in the future.

Releases for anchor will also be published under the `solanafoundation` Github organization from now on.

As always, there are a great number of changes, but we'll only be covering the
most important ones here. For a list of all notable changes, see the
[CHANGELOG](https://github.com/coral-xyz/anchor/blob/v0.31.1/CHANGELOG.md#0311---2025-04-19).

### IDL Build Fixes

As of `nightly-2025-04-16`, `SourceFile` does not exist anymore. 
IDLs have been historically built with nightly, and in order to fix this we had 
to update our `proc_macro2` usage accordingly.

If you ran into the following error whild building:

```
no method named `source_file` found for reference `&proc_macro::Span` in the current scope
```

This should now be fixed in this release.


---

## How to upgrade

1. Install the latest version of `avm`:

   ```sh
   cargo install --git https://github.com/coral-xyz/anchor avm --force
   ```

   This will allow installing Anchor CLI without having to compile from source,
   see [Install from binary](#install-from-binary).

2. Update `anchor-cli`:

   ```sh
   avm install 0.31.1
   ```

3. Update Anchor crate(s) to `0.31.1`.

4. Update TS package(s) to `0.31.1`.

## Recommended Solana Version

The recommended Solana version is `2.1.0`. This is a special upgrade because
some of the Solana binaries have been renamed to Agave, see
[Agave transition](https://github.com/anza-xyz/agave/wiki/Agave-Transition).

You can install the newer tooling by running:

```
sh -c "$(curl -sSfL https://release.anza.xyz/v2.1.0/install)"
```

This change is handled automatically if you specify `toolchain.solana_version`,
see [Automatic Agave transition](#automatic-agave-transition).

---

See the full list of notable changes in the
[CHANGELOG](https://github.com/solana-foundation/anchor/blob/v0.31.1/CHANGELOG.md#0311---2025-04-19).
